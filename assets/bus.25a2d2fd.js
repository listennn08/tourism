var j=Object.defineProperty,O=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var k=(t,a,s)=>a in t?j(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,N=(t,a)=>{for(var s in a||(a={}))M.call(a,s)&&k(t,s,a[s]);if(Z)for(var s of Z(a))J.call(a,s)&&k(t,s,a[s]);return t},T=(t,a)=>O(t,q(a));import{r as w,m as B,d as z,i as H,o as l,c as d,a as r,e as F,u as n,n as g,C as U,t as S,h as V,F as $,f as L,y as I,H as P,I as G}from"./vendor.51d29595.js";import{g as K,e as Q,f as W,h as X,i as Y}from"./index.18d21a32.js";function tt(){const t=w({City:"",CityCode:"",CityID:"",CityName:"",CountyID:""}),a=e=>{!e||(t.City=e.City,t.CityCode=e.CityCode,t.CityID=e.CityID,t.CityName=e.CityName,t.CountyID=e.CountyID,h())},s=w([]),y=B(),h=async()=>{clearInterval(y.value),c.TaiwanTripName="",c.DepartureStopNameZh="",c.DestinationStopNameZh="",s.splice(0,s.length);const e=(await K({select:"TaiwanTripName,DepartureStopNameZh,DestinationStopNameZh",filter:`City eq '${t.City}'`})).data.map(u=>T(N({},u),{TaiwanTripName:u.TaiwanTripName.Zh_tw}));s.push(...e),i.splice(0,i.length)},c=w({TaiwanTripName:"",DepartureStopNameZh:"",DestinationStopNameZh:""}),x=e=>{c.TaiwanTripName=e.TaiwanTripName,c.DepartureStopNameZh=e.DepartureStopNameZh,c.DestinationStopNameZh=e.DestinationStopNameZh,C(),y.value=setInterval(()=>C(),15e3)},i=w([]),C=async()=>{i.splice(0,i.length);const e=(await Q(c.TaiwanTripName,{select:"RouteUID,Direction,Stops,UpdateTime"})).data.map(p=>T(N({},p),{Stops:p.Stops.map(m=>T(N({},m),{StopName:m.StopName.Zh_tw})).sort((m,o)=>m.StopSequence-o.StopSequence)}));i.push(...e);const u=await v();for(let p=0;p<i.length;p+=1)i[p].Stops=i[p].Stops.map(m=>{const o=JSON.parse(JSON.stringify(m)),_=u.find(f=>m.StopUID===f.StopUID);return _&&(o.timeInfo?o.timeInfo.push(_):o.timeInfo=[_]),o})},D=B(0),v=async()=>(await W(c.TaiwanTripName,{select:"PlateNumb,StopUID,CurrentStop,Direction,EstimateTime,StopCountDown,DestinationStop,StopStatus,NextBusTime,UpdateTime"})).data;return{selectedCity:t,setSelectedCity:a,routeData:s,selectedRoute:c,setSelectedRoute:x,direction:D,stops:i}}const et=t=>(P("data-v-0b82e8b1"),t=t(),G(),t),st={class:"header"},at={class:"header-container custom-shadow"},ot={class:"header-content"},it={class:"flex items-center justify-center mb-10"},nt={class:"flex min-h-13"},rt={href:"#",class:"route-btn"},ut=I(" \u5F80 "),ct={class:"text-primary ml-2"},pt=I(" \u5F80 "),mt={class:"text-primary ml-2"},lt={class:"mt-45 lg:mt-20 pb-20"},dt=et(()=>r("p",{class:"text-primary mb-3 text-right px-2 md:px-0"}," \u6BCF\u9694 15 \u79D2\u66F4\u65B0\u4E00\u6B21 ",-1)),ht={class:"bg-white pt-4 md:py-13 px-2 md:px-14 min-h-screen"},_t={key:0,class:"box-border"},St={class:"time-list"},yt={key:0},Ct={key:1},Dt={key:1,class:"text-2xl text-gray"},ft=z({setup(t){const a=H("cityOptions"),{selectedCity:s,setSelectedCity:y,selectedRoute:h,setSelectedRoute:c,routeData:x,direction:i,stops:C}=tt(),D=e=>{if(typeof e=="number"){const u=Math.floor(e/60);return u<3?"\u9032\u7AD9\u4E2D":`${u} \u5206\u9418`}return null},v=e=>{switch(e){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u8ECA\u5DF2\u904E";case 4:return"\u4ECA\u65E5\u672A\u71DF\u904B";default:return null}};return(e,u)=>{var m;const p=Y;return l(),d($,null,[r("section",st,[r("div",at,[r("div",ot,[r("div",it,[F(p,{value:n(s),options:n(a),change:n(y),class:"w-1/2 mx-1",placeholder:"\u9078\u64C7\u7E23\u5E02",text:"CityName",keyValue:"City"},null,8,["value","options","change"]),F(p,{value:n(h),options:n(x),change:n(c),class:"w-1/2 mx-1",placeholder:"\u9078\u64C7\u8DEF\u7DDA",text:"TaiwanTripName",keyValue:"TaiwanTripName"},null,8,["value","options","change"])]),r("div",nt,[n(h).TaiwanTripName?(l(),d("div",{key:0,class:g(["route-btn-container",{active:n(i)===0}]),onClick:u[0]||(u[0]=U(o=>i.value=0,["prevent"]))},[r("a",rt,[ut,r("span",ct,S(n(h).DepartureStopNameZh),1)])],2)):V("",!0),n(h).TaiwanTripName?(l(),d("div",{key:1,class:g(["route-btn-container",{active:n(i)===1}])},[r("a",{href:"#",class:"route-btn",onClick:u[1]||(u[1]=U(o=>i.value=1,["prevent"]))},[pt,r("span",mt,S(n(h).DestinationStopNameZh),1)])],2)):V("",!0)])])])]),r("section",lt,[dt,r("div",ht,[n(h).TaiwanTripName?(l(),d("div",_t,[r("ul",St,[(l(!0),d($,null,L((m=n(C)[n(i)])==null?void 0:m.Stops,(o,_)=>{var f,b,E,R,A;return l(),d("li",{key:`${o.StopUID}${_}`,class:"list-item"},[r("div",{class:g(["mr-2 text-center border rounded px-4 py-2",{"bg-primary text-white border-transparent":D((f=o.timeInfo)==null?void 0:f[0].EstimateTime)==="\u9032\u7AD9\u4E2D","border-gray text-gray":((b=o.timeInfo)==null?void 0:b[0].StopStatus)!==0}])},[((E=o.timeInfo)==null?void 0:E[0].StopStatus)===0?(l(),d("span",yt,S(D((R=o.timeInfo)==null?void 0:R[0].EstimateTime)),1)):(l(),d("span",Ct,S(v((A=o.timeInfo)==null?void 0:A[0].StopStatus)),1))],2),I(" "+S(o.StopName),1)])}),128))])])):(l(),d("span",Dt,"\u8ACB\u9078\u64C7\u516C\u8ECA\u8DEF\u7DDA"))])])],64)}}});var xt=X(ft,[["__scopeId","data-v-0b82e8b1"]]);export{xt as default};
