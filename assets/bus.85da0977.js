var $=Object.defineProperty,j=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var Z=(t,a,s)=>a in t?$(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,N=(t,a)=>{for(var s in a||(a={}))q.call(a,s)&&Z(t,s,a[s]);if(A)for(var s of A(a))M.call(a,s)&&Z(t,s,a[s]);return t},T=(t,a)=>j(t,O(a));import{r as w,m as k,d as J,i as z,o as l,c as d,a as r,e as B,u as n,n as g,C as F,t as y,h as U,F as V,f as H,y as I,H as L,I as P}from"./vendor.51d29595.js";import{g as G,e as K,f as Q,h as W,i as X}from"./index.ff518d89.js";function Y(){const t=w({City:"",CityCode:"",CityID:"",CityName:"",CountyID:""}),a=e=>{!e||(t.City=e.City,t.CityCode=e.CityCode,t.CityID=e.CityID,t.CityName=e.CityName,t.CountyID=e.CountyID,h())},s=w([]),S=k(),h=async()=>{clearInterval(S.value),c.TaiwanTripName="",c.DepartureStopNameZh="",c.DestinationStopNameZh="",s.splice(0,s.length);const e=(await G({select:"TaiwanTripName,DepartureStopNameZh,DestinationStopNameZh",filter:`City eq '${t.City}'`})).data.map(u=>T(N({},u),{TaiwanTripName:u.TaiwanTripName.Zh_tw}));s.push(...e),o.splice(0,o.length)},c=w({TaiwanTripName:"",DepartureStopNameZh:"",DestinationStopNameZh:""}),v=e=>{c.TaiwanTripName=e.TaiwanTripName,c.DepartureStopNameZh=e.DepartureStopNameZh,c.DestinationStopNameZh=e.DestinationStopNameZh,C(),S.value=setInterval(()=>C(),15e3)},o=w([]),C=async()=>{o.splice(0,o.length);const e=(await K(c.TaiwanTripName,{select:"RouteUID,Direction,Stops,UpdateTime"})).data.map(p=>T(N({},p),{Stops:p.Stops.map(m=>T(N({},m),{StopName:m.StopName.Zh_tw})).sort((m,i)=>m.StopSequence-i.StopSequence)}));o.push(...e);const u=await x();for(let p=0;p<o.length;p+=1)o[p].Stops=o[p].Stops.map(m=>{const i=JSON.parse(JSON.stringify(m)),_=u.find(f=>m.StopUID===f.StopUID);return _&&(i.timeInfo?i.timeInfo.push(_):i.timeInfo=[_]),i})},D=k(0),x=async()=>(await Q(c.TaiwanTripName,{select:"PlateNumb,StopUID,CurrentStop,Direction,EstimateTime,StopCountDown,DestinationStop,StopStatus,NextBusTime,UpdateTime"})).data;return{selectedCity:t,setSelectedCity:a,routeData:s,selectedRoute:c,setSelectedRoute:v,direction:D,stops:o}}const tt=t=>(L("data-v-700db56b"),t=t(),P(),t),et={class:"header"},st={class:"header-container custom-shadow"},at={class:"header-content"},ot={class:"flex items-center justify-center mb-10"},it={class:"flex min-h-13"},nt={href:"#",class:"route-btn"},rt=I(" \u5F80 "),ut={class:"text-primary ml-2"},ct=I(" \u5F80 "),pt={class:"text-primary ml-2"},mt={class:"pb-20"},lt=tt(()=>r("p",{class:"text-primary mb-3 text-right"}," \u6BCF\u9694 15 \u79D2\u66F4\u65B0\u4E00\u6B21 ",-1)),dt={class:"bg-white py-13 px-14"},ht={key:0},_t={class:"time-list"},yt={class:"mr-2"},St={key:1,class:"border rounded border-gray text-gray px-4 py-2"},Ct={key:1,class:"text-2xl text-gray"},Dt=J({setup(t){const a=z("cityOptions"),{selectedCity:s,setSelectedCity:S,selectedRoute:h,setSelectedRoute:c,routeData:v,direction:o,stops:C}=Y(),D=e=>{if(typeof e=="number"){const u=Math.floor(e/60);return u<3?"\u9032\u7AD9\u4E2D":`${u} \u5206\u9418`}return null},x=e=>{switch(e){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u8ECA\u5DF2\u904E";case 4:return"\u4ECA\u65E5\u672A\u71DF\u904B";default:return null}};return(e,u)=>{var m;const p=X;return l(),d(V,null,[r("section",et,[r("div",st,[r("div",at,[r("div",ot,[B(p,{value:n(s),options:n(a),change:n(S),class:"w-1/2 mx-1",placeholder:"\u9078\u64C7\u7E23\u5E02",text:"CityName",keyValue:"City"},null,8,["value","options","change"]),B(p,{value:n(h),options:n(v),change:n(c),class:"w-1/2 mx-1",placeholder:"\u9078\u64C7\u8DEF\u7DDA",text:"TaiwanTripName",keyValue:"TaiwanTripName"},null,8,["value","options","change"])]),r("div",it,[n(h).TaiwanTripName?(l(),d("div",{key:0,class:g(["route-btn-container",{active:n(o)===0}]),onClick:u[0]||(u[0]=F(i=>o.value=0,["prevent"]))},[r("a",nt,[rt,r("span",ut,y(n(h).DepartureStopNameZh),1)])],2)):U("",!0),n(h).TaiwanTripName?(l(),d("div",{key:1,class:g(["route-btn-container",{active:n(o)===1}])},[r("a",{href:"#",class:"route-btn",onClick:u[1]||(u[1]=F(i=>o.value=1,["prevent"]))},[ct,r("span",pt,y(n(h).DestinationStopNameZh),1)])],2)):U("",!0)])])])]),r("section",mt,[lt,r("div",dt,[n(h).TaiwanTripName?(l(),d("div",ht,[r("ul",_t,[(l(!0),d(V,null,H((m=n(C)[n(o)])==null?void 0:m.Stops,(i,_)=>{var f,b,E,R;return l(),d("li",{key:`${i.StopUID}${_}`,class:"flex items-center my-5 pl-10"},[r("div",yt,[((f=i.timeInfo)==null?void 0:f[0].StopStatus)===0?(l(),d("span",{key:0,class:g(["w-10 border rounded px-6 py-2",{"bg-primary text-white border-transparent":D((b=i.timeInfo)==null?void 0:b[0].EstimateTime)==="\u9032\u7AD9\u4E2D"}])},y(D((E=i.timeInfo)==null?void 0:E[0].EstimateTime)),3)):(l(),d("span",St,y(x((R=i.timeInfo)==null?void 0:R[0].StopStatus)),1))]),I(" "+y(i.StopName),1)])}),128))])])):(l(),d("span",Ct,"\u8ACB\u9078\u64C7\u516C\u8ECA\u8DEF\u7DDA"))])])],64)}}});var wt=W(Dt,[["__scopeId","data-v-700db56b"]]);export{wt as default};
